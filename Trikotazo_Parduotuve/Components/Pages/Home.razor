@page "/"
@using Trikotazo_Parduotuve.Entities
@using Trikotazo_Parduotuve.Repositories
@inject KategorijaRepository kategorijaRepository;
@inject SubkategorijaRepository subkategorijaRepository;
@inject TrikotazasRepository trikotazasRepository;
@rendermode InteractiveServer

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.


<button @onclick=Work >Spausk</button>

@code{
    private List<Kategorija> kategorijos;
    private List<Subkategorija> subkategorijos;
    private List<Trikotazas> trikotazai;
    public bool visible = false;

    protected override async Task OnInitializedAsync()
    {
        await LoadKategorijas();
        await LoadSubkategorijas();
        await LoadTrikotazus();
    }

    private async Task LoadKategorijas()
    {
        kategorijos = await kategorijaRepository.GetAllAsync();
    }

    private async Task LoadSubkategorijas()
    {
        subkategorijos = await subkategorijaRepository.GetAllAsync();
    }

    private async Task LoadTrikotazus()
    {
        trikotazai = await trikotazasRepository.GetAllAsync();
    }

    public void Work()
    {
        visible = true;
    }
}